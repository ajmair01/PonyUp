<div>
	<x-ponyup-topbar></x-ponyup-topbar>
	<div class="contents">
        <div class="row">
            <h2>Image Capture</h2>
            <div class="row fieldset info" ng-show="hasGetUserMedia && !setupComplete && !cameraError && !cameraDenied">
                <span>
                    Please allow access to your camera. If you do not want the site to access your camera, you can deny
                    access and upload an image instead.
                </span>
            </div>
            <div class="row fieldset error" ng-show="cameraError">
                <span>There was an error accessing your camera: {{cameraErrorMsg}}</span>
            </div>
            <div class="row fieldset error" ng-show="cameraDenied">
                <span>Camera access denied. You can upload an image below or go back to enter data manually.</span>
            </div>
            <div class="row fieldset" id="step1" ng-show="!pictureTaken && setupComplete || cameraError || cameraDenied">
                <div id="upload" ng-show="cameraError || cameraDenied">
                    <h3 class="left">Upload Image</h3>
                    <span class="left" style="text-align: left">
                        Upload an image of the horse's information from the racing program. Make sure the image
                        includes the horse's name, jockey's win percentage, and the horse's past performances.
                    </span>
                    <input type="file" capture="camera" accept="image/*"
                           ng-show="!hasGetUserMedia || cameraError || cameraDenied && !pictureUploaded">
                </div>
                <div id="takePicture" ng-show="hasGetUserMedia && !pictureTaken && !cameraDenied">
                    <figure class="not-ready">
                        <video autoplay></video>
                    </figure>
                    <a ng-click="takePicture()" class="button radius">Take Picture</a>
                </div>
            </div>
            <div class="row fieldset" id="step2" ng-show="pictureTaken || pictureUploaded">
                <figure>
                    <canvas style="display: none"></canvas>
                    <img src=""/>
                </figure>
            </div>
        </div>
    </div>
</div>
