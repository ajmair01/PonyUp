<div>
	<x-ponyup-topbar></x-ponyup-topbar>
	<div class="contents">
		<div class="row">
			<h2>HORSES</h2>
			<div class="row" ng-show="success">
				<span class="success">The information was saved successfully!</span>
			</div>
            <form name="mainForm" data-main-form>
            <div class="row fieldset" ng-repeat="horse in horses">
                <ng-form name="form" data-child-form>
                    <div class="row">
                        <img class="small-img" src="img/horse.png">
                        <h4 ng-show="horse.id && horse.name">#{{horse.id}} - {{horse.name}}</h4>
                        <a ng-click="imageCapture(horse.id)" style="float:right">
                            <img class="small-img" src="img/camera.png" style="width: 2rem">
                        </a>
                    </div>
                    <div class="row">
                        <div class="small-12 medium-2 large-2 columns">
                            <label for="horse_{{horse.id}}_id">Number:</label>
                            <input id="horse_{{horse.id}}_id" name="horse_id" type="text" ng-model="horse.id" required ng-class="{error: !form.horse_id.$valid}">
                            <small class="error" ng-show="form.horse_id.$error.required"># is required.</small>
                        </div>
                        <div class="small-12 medium-4 large-4 columns">
                            <label for="horse_{{horse.id}}_name">Name:</label>
                            <input id="horse_{{horse.id}}_name" name="horse_name" type="text" ng-model="horse.name" required ng-class="{error: !form.horse_name.$valid}"/>
                            <small class="error" ng-show="form.horse_name.$error.required">Name is required.</small>
                        </div>
                        <div class="small-12 medium-4 large-4 columns">
                            <label for="horse_{{horse.id}}_jockey">Jockey:</label>
                            <input id="horse_{{horse.id}}_jockey" type="text" ng-model="horse.jockey"/>
                        </div>
                        <div class="small-12 medium-2 large-2 columns">
                            <label for="horse_{{horse.id}}_winPct">Win %:</label>
                            <input id="horse_{{horse.id}}_winPct" name="winPct" type="text" ng-model="horse.winPct" required ng-pattern="/^100$|^\d{0,2}(\.\d{1}\d*)? *%?$/" ng-class="{error: !form.winPct.$valid}"/>
                            <small class="error" ng-show="form.winPct.$error.required">Jockey Win % is required.</small>
                            <small class="error" ng-show="form.winPct.$error.pattern">Not a valid percent.</small>
                        </div>
                    </div>
                    <div class="row">
                        <a ng-click="modifyHistory(horse.id)" class="button radius small">Modify Race History</a>
                        <span class="history-size">History&nbsp;for&nbsp;{{horse.history.length ? horse.history.length : 0}}&nbsp;races&nbsp;specified.</span>
                    </div>
                </ng-form>
            </div>
            </form>
		</div>
		<div class="row">
			<a ng-click="add()" class="button radius">Add Horse</a>
			<a ng-click="save()" class="button radius" ng-disabled="mainForm.$invalid">Save</a>
			<a ng-click="calculate()" class="button radius">Pick the Winners</a>
		</div>
	</div>
</div>
